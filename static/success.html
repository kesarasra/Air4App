<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 2: Location</title>
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body>
  <header class="navbar">
    <h1>Daily Logger</h1>
    <button onclick="window.location.href='/'">Home</button>
    <button onclick="window.location.href='/logout'">Logout</button>
  </header>
  <main class="container">
    <h1>Success!</h1>
  <p>Your activity has been recorded.</p>
  <div class="btn-group">
    <button onclick="addAnother()">Add Another Activity</button>
    <button onclick="exitForm()">Exit</button>
  </div>
</main>

<script src="scripts/utils.js"></script>
<script>
  function addAnother() {
    // Keep workerName and logDate
    const worker = getFromSession('workerName');
    const date = getFromSession('logDate');
    const lastWelcomed = getFromSession('lastWelcomedWorker');

    sessionStorage.clear();
    saveToSession('workerName', worker);
    saveToSession('logDate', date);
    saveToSession('lastWelcomedWorker', lastWelcomed);

    // Go back to location step
    window.location.href = 'location.html';
  }

  function exitForm() {
    const worker = getFromSession('workerName') || 'worker';

    // Show goodbye popup
    showPopup(`Good job today, ${worker}.\nHave a good rest!`, {
      className: 'goodbye',
      duration: 3000,
      sound: 'sounds/goodbye.wav'
    });

    // Delay redirect to allow popup to show
    setTimeout(() => {
      sessionStorage.clear();
      window.location.href = 'index.html';
    }, 3000);
  }

</script>
